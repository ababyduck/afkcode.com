{% extends 'base.html' %}

{% block title %}afkcode.com - Blog{% endblock title %}

{% block page_content %}
{% load markdownify %}

<div class="col-md-8 offset-md-2">
    <h1>Blog Index</h1>
    <hr>
    {% for post in posts %}
    <h2><a href="{% url 'blog_detail' year=post.created_on.year month=post.created_on.month pk=post.pk slug=post.slug %}">{{ post.title }}</a></h2>
    <small>
        {{ post.created_on.date }} |&nbsp; Categories:&nbsp;
        {% for category in post.categories.all %}
            <a href="{% url 'blog_category' category.name %}">{{ category.name }}</a>&nbsp;
        {% endfor %}
    </small>
    <div>
        {{ post.body | slice:':360' | markdown | safe }}
        {% if post.body|length > 360 %}...{% endif %}
    </div>
    {% empty %}
        <p>Nothing to display.</p>
    {% endfor %}
</div>
{% endblock %}